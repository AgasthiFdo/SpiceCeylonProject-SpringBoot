<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container my-5">
    <div class="card shadow-lg p-4">
        <h3 class="text-center mb-4">ðŸ’³ Checkout</h3>

        <!-- Cart Summary -->
        <h5 class="mb-3">Order Summary</h5>
        <table class="table table-bordered">
            <thead class="table-dark">
            <tr>
                <th>Product</th>
                <th>Qty</th>
                <th>Total (Rs)</th>
            </tr>
            </thead>
            <tbody id="checkoutTable"></tbody>
        </table>
        <h4 class="text-end">Grand Total: Rs <span id="checkoutTotal">0</span></h4>

        <!-- Customer Info -->
        <h5 class="mt-4">Customer Information</h5>
        <form id="checkoutForm">
            <div class="mb-3">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Address</label>
                <textarea class="form-control" rows="2" required></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Phone</label>
                <input type="tel" class="form-control" required>
            </div>
            <div class="mb-3">
<!--                <label class="form-label">Payment Method</label>-->
<!--                <select class="form-select" required>-->
<!--                    <option value="">&#45;&#45; Select Payment &#45;&#45;</option>-->
<!--                    <option value="cash">Cash on Delivery</option>-->
<!--                    <option value="card">Credit / Debit Card</option>-->
<!--                    <option value="bank">Bank Transfer</option>-->
<!--                </select>-->
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-success w-20">Pay</button>
            </div>
        </form>
    </div>
</div>

<script>
    function loadCheckout() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let checkoutTable = document.getElementById("checkoutTable");
        let checkoutTotal = 0;

        checkoutTable.innerHTML = "";

        cart.forEach(item => {
            let row = `<tr>
                  <td>${item.name}</td>
                  <td>${item.quantity}</td>
                  <td>${item.total}</td>
                 </tr>`;
            checkoutTable.innerHTML += row;
            checkoutTotal += item.total;
        });

        document.getElementById("checkoutTotal").textContent = checkoutTotal;
    }

    // Submit Checkout Form
    document.getElementById("checkoutForm").addEventListener("submit", function (e) {
        e.preventDefault();
        alert("âœ… Order Placed Successfully!");
        localStorage.removeItem("cart"); // clear cart after order
        window.location.href = "index.html"; // back to home/shop
    });

    loadCheckout();


    document.getElementById("checkoutForm").addEventListener("submit", function(e) {
        e.preventDefault();
        window.location.href = "PlaceOrder.html"; // redirect to place order confirmation
    });

    loadCheckout();

</script>

</body>
</html>
